{"ast":null,"code":"import _asyncToGenerator from \"F:/Projects/Project Square/Template/adminlte-3-angular-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Gatekeeper } from 'gatekeeper-client-sdk';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"ngx-toastr\";\nexport class AppService {\n  constructor(router, toastr) {\n    this.router = router;\n    this.toastr = toastr;\n    this.user = null;\n    this.baseUrl = 'https://reqres.in/api/login';\n  }\n  loginByAuth({\n    email,\n    password\n  }) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const token = yield Gatekeeper.loginByAuth(email, password);\n        localStorage.setItem('token', token);\n        yield _this.getProfile();\n        _this.router.navigate(['/']);\n        _this.toastr.success('Login success');\n      } catch (error) {\n        _this.toastr.error(error.message);\n      }\n    })();\n  }\n  registerByAuth({\n    email,\n    password\n  }) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const token = yield Gatekeeper.registerByAuth(email, password);\n        localStorage.setItem('token', token);\n        yield _this2.getProfile();\n        _this2.router.navigate(['/']);\n        _this2.toastr.success('Register success');\n      } catch (error) {\n        _this2.toastr.error(error.message);\n      }\n    })();\n  }\n  loginByGoogle() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const token = yield Gatekeeper.loginByGoogle();\n        localStorage.setItem('token', token);\n        yield _this3.getProfile();\n        _this3.router.navigate(['/']);\n        _this3.toastr.success('Login success');\n      } catch (error) {\n        _this3.toastr.error(error.message);\n      }\n    })();\n  }\n  registerByGoogle() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const token = yield Gatekeeper.registerByGoogle();\n        localStorage.setItem('token', token);\n        yield _this4.getProfile();\n        _this4.router.navigate(['/']);\n        _this4.toastr.success('Register success');\n      } catch (error) {\n        _this4.toastr.error(error.message);\n      }\n    })();\n  }\n  loginByFacebook() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const token = yield Gatekeeper.loginByFacebook();\n        localStorage.setItem('token', token);\n        yield _this5.getProfile();\n        _this5.router.navigate(['/']);\n        _this5.toastr.success('Login success');\n      } catch (error) {\n        _this5.toastr.error(error.message);\n      }\n    })();\n  }\n  registerByFacebook() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const token = yield Gatekeeper.registerByFacebook();\n        localStorage.setItem('token', token);\n        yield _this6.getProfile();\n        _this6.router.navigate(['/']);\n        _this6.toastr.success('Register success');\n      } catch (error) {\n        _this6.toastr.error(error.message);\n      }\n    })();\n  }\n  getProfile() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this7.user = yield Gatekeeper.getProfile();\n      } catch (error) {\n        _this7.logout();\n        throw error;\n      }\n    })();\n  }\n  logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('gatekeeper_token');\n    this.user = null;\n    this.router.navigate(['/login']);\n  }\n  static #_ = this.ɵfac = function AppService_Factory(t) {\n    return new (t || AppService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.ToastrService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AppService,\n    factory: AppService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":";AAGA,SAAQA,UAAU,QAAO,uBAAuB;;;;AAKhD,OAAM,MAAOC,UAAU;EAInBC,YAAoBC,MAAc,EAAUC,MAAqB;IAA7C,WAAM,GAAND,MAAM;IAAkB,WAAM,GAANC,MAAM;IAH3C,SAAI,GAAQ,IAAI;IACf,YAAO,GAAG,6BAA6B;EAEqB;EAE9DC,WAAW,CAAC;IAACC,KAAK;IAAEC;EAAQ,CAAC;IAAA;IAAA;MAC/B,IAAI;QACA,MAAMC,KAAK,SAASR,UAAU,CAACK,WAAW,CAACC,KAAK,EAAEC,QAAQ,CAAC;QAE3DE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;QACpC,MAAM,KAAI,CAACG,UAAU,EAAE;QACvB,KAAI,CAACR,MAAM,CAACS,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3B,KAAI,CAACR,MAAM,CAACS,OAAO,CAAC,eAAe,CAAC;OACvC,CAAC,OAAOC,KAAK,EAAE;QACZ,KAAI,CAACV,MAAM,CAACU,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC;;IACnC;EACL;EAEMC,cAAc,CAAC;IAACV,KAAK;IAAEC;EAAQ,CAAC;IAAA;IAAA;MAClC,IAAI;QACA,MAAMC,KAAK,SAASR,UAAU,CAACgB,cAAc,CAACV,KAAK,EAAEC,QAAQ,CAAC;QAC9DE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;QACpC,MAAM,MAAI,CAACG,UAAU,EAAE;QACvB,MAAI,CAACR,MAAM,CAACS,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3B,MAAI,CAACR,MAAM,CAACS,OAAO,CAAC,kBAAkB,CAAC;OAC1C,CAAC,OAAOC,KAAK,EAAE;QACZ,MAAI,CAACV,MAAM,CAACU,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC;;IACnC;EACL;EAEME,aAAa;IAAA;IAAA;MACf,IAAI;QACA,MAAMT,KAAK,SAASR,UAAU,CAACiB,aAAa,EAAE;QAC9CR,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;QACpC,MAAM,MAAI,CAACG,UAAU,EAAE;QACvB,MAAI,CAACR,MAAM,CAACS,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3B,MAAI,CAACR,MAAM,CAACS,OAAO,CAAC,eAAe,CAAC;OACvC,CAAC,OAAOC,KAAK,EAAE;QACZ,MAAI,CAACV,MAAM,CAACU,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC;;IACnC;EACL;EAEMG,gBAAgB;IAAA;IAAA;MAClB,IAAI;QACA,MAAMV,KAAK,SAASR,UAAU,CAACkB,gBAAgB,EAAE;QACjDT,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;QACpC,MAAM,MAAI,CAACG,UAAU,EAAE;QACvB,MAAI,CAACR,MAAM,CAACS,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3B,MAAI,CAACR,MAAM,CAACS,OAAO,CAAC,kBAAkB,CAAC;OAC1C,CAAC,OAAOC,KAAK,EAAE;QACZ,MAAI,CAACV,MAAM,CAACU,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC;;IACnC;EACL;EAEMI,eAAe;IAAA;IAAA;MACjB,IAAI;QACA,MAAMX,KAAK,SAASR,UAAU,CAACmB,eAAe,EAAE;QAChDV,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;QACpC,MAAM,MAAI,CAACG,UAAU,EAAE;QACvB,MAAI,CAACR,MAAM,CAACS,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3B,MAAI,CAACR,MAAM,CAACS,OAAO,CAAC,eAAe,CAAC;OACvC,CAAC,OAAOC,KAAK,EAAE;QACZ,MAAI,CAACV,MAAM,CAACU,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC;;IACnC;EACL;EAEMK,kBAAkB;IAAA;IAAA;MACpB,IAAI;QACA,MAAMZ,KAAK,SAASR,UAAU,CAACoB,kBAAkB,EAAE;QACnDX,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;QACpC,MAAM,MAAI,CAACG,UAAU,EAAE;QACvB,MAAI,CAACR,MAAM,CAACS,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3B,MAAI,CAACR,MAAM,CAACS,OAAO,CAAC,kBAAkB,CAAC;OAC1C,CAAC,OAAOC,KAAK,EAAE;QACZ,MAAI,CAACV,MAAM,CAACU,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC;;IACnC;EACL;EAEMJ,UAAU;IAAA;IAAA;MACZ,IAAI;QACA,MAAI,CAACU,IAAI,SAASrB,UAAU,CAACW,UAAU,EAAE;OAC5C,CAAC,OAAOG,KAAK,EAAE;QACZ,MAAI,CAACQ,MAAM,EAAE;QACb,MAAMR,KAAK;;IACd;EACL;EAEAQ,MAAM;IACFb,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;IAChCd,YAAY,CAACc,UAAU,CAAC,kBAAkB,CAAC;IAC3C,IAAI,CAACF,IAAI,GAAG,IAAI;IAChB,IAAI,CAAClB,MAAM,CAACS,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EACpC;EAAC;qBA7FQX,UAAU;EAAA;EAAA;WAAVA,UAAU;IAAAuB,SAAVvB,UAAU;IAAAwB,YAFP;EAAM","names":["Gatekeeper","AppService","constructor","router","toastr","loginByAuth","email","password","token","localStorage","setItem","getProfile","navigate","success","error","message","registerByAuth","loginByGoogle","registerByGoogle","loginByFacebook","registerByFacebook","user","logout","removeItem","factory","providedIn"],"sourceRoot":"","sources":["F:\\Projects\\Project Square\\Template\\adminlte-3-angular-main\\src\\app\\services\\app.service.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {ToastrService} from 'ngx-toastr';\nimport {Gatekeeper} from 'gatekeeper-client-sdk';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppService {\n    public user: any = null;\n    private baseUrl = 'https://reqres.in/api/login';\n\n    constructor(private router: Router, private toastr: ToastrService) {}\n\n    async loginByAuth({email, password}) {\n        try {\n            const token = await Gatekeeper.loginByAuth(email, password);\n            \n            localStorage.setItem('token', token);\n            await this.getProfile();\n            this.router.navigate(['/']);\n            this.toastr.success('Login success');\n        } catch (error) {\n            this.toastr.error(error.message);\n        }\n    }\n\n    async registerByAuth({email, password}) {\n        try {\n            const token = await Gatekeeper.registerByAuth(email, password);\n            localStorage.setItem('token', token);\n            await this.getProfile();\n            this.router.navigate(['/']);\n            this.toastr.success('Register success');\n        } catch (error) {\n            this.toastr.error(error.message);\n        }\n    }\n\n    async loginByGoogle() {\n        try {\n            const token = await Gatekeeper.loginByGoogle();\n            localStorage.setItem('token', token);\n            await this.getProfile();\n            this.router.navigate(['/']);\n            this.toastr.success('Login success');\n        } catch (error) {\n            this.toastr.error(error.message);\n        }\n    }\n\n    async registerByGoogle() {\n        try {\n            const token = await Gatekeeper.registerByGoogle();\n            localStorage.setItem('token', token);\n            await this.getProfile();\n            this.router.navigate(['/']);\n            this.toastr.success('Register success');\n        } catch (error) {\n            this.toastr.error(error.message);\n        }\n    }\n\n    async loginByFacebook() {\n        try {\n            const token = await Gatekeeper.loginByFacebook();\n            localStorage.setItem('token', token);\n            await this.getProfile();\n            this.router.navigate(['/']);\n            this.toastr.success('Login success');\n        } catch (error) {\n            this.toastr.error(error.message);\n        }\n    }\n\n    async registerByFacebook() {\n        try {\n            const token = await Gatekeeper.registerByFacebook();\n            localStorage.setItem('token', token);\n            await this.getProfile();\n            this.router.navigate(['/']);\n            this.toastr.success('Register success');\n        } catch (error) {\n            this.toastr.error(error.message);\n        }\n    }\n\n    async getProfile() {\n        try {\n            this.user = await Gatekeeper.getProfile();\n        } catch (error) {\n            this.logout();\n            throw error;\n        }\n    }\n\n    logout() {\n        localStorage.removeItem('token');\n        localStorage.removeItem('gatekeeper_token');\n        this.user = null;\n        this.router.navigate(['/login']);\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}